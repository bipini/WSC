/**
 * 
 */
package com.mindfire.wsc.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.mindfire.wsc.domain.Fileupload;
import com.mindfire.wsc.model.FileUploadDTO;
import com.mindfire.wsc.model.UserDTO;
import com.mindfire.wsc.repositories.FileuploadRepository;

/**
 * @author bipins
 *
 */

@Service
public class FileUploadServices {
	
	@Autowired
	FileuploadRepository filerepo;
	
	/*
	 * This method is used to update image path and name for specific User to Db
	 * @param Fileupload , UserDTo
	 */
	public int savephoto(Fileupload fileupload, UserDTO userdto) {

		Fileupload upload = filerepo.findById(userdto.getUserId());
		if(upload != null) {
			fileupload.setId(upload.getId());
		}		
		
		filerepo.saveAndFlush(fileupload);
		return 0;
	}

	/*
	 * This method is used to fetch the Users Profile photo details
	 * @Param UserId
	 */
	public FileUploadDTO getUserPhoto(int userId) {
		
		Fileupload fileupload = filerepo.findById(userId);		
		if(fileupload != null) {
			System.out.println(fileupload.toString());
			//return convetFileUploadToFileUploadDTO(fileupload);
		}			
		
		return null;		
	}

	/*
	 * Convert Fileupload Domain object to Fileupload DTO
	 * @param Fileupload  object
	 */
	//@SuppressWarnings("null")
	private FileUploadDTO convetFileUploadToFileUploadDTO(Fileupload fileupload) {
		
		 FileUploadDTO uploadDto = null;
		 
		 if(fileupload != null) {
			 uploadDto.setId(fileupload.getId());
			 uploadDto.setFilepath(fileupload.getFilepath());
			 uploadDto.setFilename(fileupload.getFilename());
		 }
		 return uploadDto;
	}
}
